<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code RL Briefing</title>
    <style>
      :root { --bg:#faf8f5; --card:#fff; --text:#1d1d1f; --muted:#66606f; --line:#e7e2db; }
      body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,sans-serif}
      .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 56px}
      .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;margin:12px 0}
      h1{margin:0 0 8px;font-size:2rem} h2{margin:0 0 10px;font-size:1.1rem}
      p,li{line-height:1.45} a{color:#2c5cc5;text-decoration:none} a:hover{text-decoration:underline}
      table{width:100%;border-collapse:collapse} th,td{border-bottom:1px solid var(--line);padding:8px;vertical-align:top;text-align:left}
      .muted{color:var(--muted);font-size:.92rem}.quote{border-left:3px solid #ddd;padding-left:10px;color:#333;margin:8px 0}
      .pill{display:inline-block;border:1px solid var(--line);background:#f5f2ed;border-radius:999px;padding:3px 10px;margin:3px 6px 3px 0}
    </style>
  </head>
  <body>
    <main class="wrap">
      <h1>What is the latest in code RL environments and human data?</h1>
      <p class="muted">Primary-source driven dataset for Feb 19–25, 2026. Includes raw text blocks, account links, thread links, and paper links. No summary-only rows.</p>
      <p class="muted"><a href="/data/raw-notes.md" target="_blank">Open raw ingest notes (verbatim)</a></p>

      <section class="card">
        <h2>Brief</h2>
        <div id="brief" style="white-space:pre-wrap"></div>
      </section>

      <section class="card">
        <h2>Start with these accounts (high-signal seeds)</h2>
        <div id="seedAccounts"></div>
      </section>

      <section class="card">
        <h2>Papers</h2>
        <table id="papers"></table>
      </section>

      <section class="card">
        <h2>Signals / Trend Synthesis</h2>
        <div id="signals"></div>
      </section>

      <section class="card">
        <h2>Primary social sources (tweets/threads)</h2>
        <div id="tweets"></div>
      </section>
    </main>

    <script>
      Promise.all([
        fetch('/data/brief.md').then(r=>r.text()),
        fetch('/data/accounts.json').then(r=>r.json()),
        fetch('/data/papers.json').then(r=>r.json()),
        fetch('/data/signals.json').then(r=>r.json()),
        fetch('/data/tweets.json').then(r=>r.json())
      ]).then(([brief,accounts,papers,signals,tweets])=>{
        const linkifiedBrief = brief.replace(/(https?:\/\/[^\s\n]+)/g, '<a href="$1" target="_blank">$1</a>');
        document.getElementById('brief').innerHTML = linkifiedBrief;

        document.getElementById('seedAccounts').innerHTML = accounts
          .filter(a=>a.priority==='seed')
          .map(a=>`<span class="pill"><a href="${a.url}" target="_blank">${a.handle}</a></span>`)
          .join('');

        document.getElementById('papers').innerHTML = `
          <thead><tr><th>Paper</th><th>Date</th><th>Key contribution</th><th>Links</th></tr></thead>
          <tbody>${papers.map(p=>`<tr><td>${p.title}</td><td>${p.date}</td><td>${p.key_contribution}</td><td>${(p.source_links||[]).map(l=>`<a href="${l.url}" target="_blank">${l.label}</a>`).join(' · ') || '<span class="muted">Add source URL</span>'}</td></tr>`).join('')}</tbody>`;

        document.getElementById('signals').innerHTML = signals.map(s=>`
          <h3>${s.section}</h3>
          <ul>${s.points.map(p=>`<li>${p}</li>`).join('')}</ul>
        `).join('');

        document.getElementById('tweets').innerHTML = tweets.map(t=>`
          <article style="padding:10px 0;border-bottom:1px solid var(--line)">
            <div><strong>${t.topic}</strong> · ${t.date}</div>
            <div class="muted"><a href="${t.author_url || (t.account_links&&t.account_links[0])}" target="_blank">${t.author || t.author_handle}</a>${t.tweet_url ? ` · <a href="${t.tweet_url}" target="_blank">post link</a>` : ''}${t.tweet_search_url ? ` · <a href="${t.tweet_search_url}" target="_blank">search link</a>` : ''}${t.archive_links ? ` · ${t.archive_links.map(a=>`<a href="${a}" target="_blank">archive</a>`).join(' · ')}` : ''}${t.paper_link ? ` · <a href="${t.paper_link}" target="_blank">paper</a>` : ''}</div>
            ${(t.full_text_blocks||t.quotes||[]).map(q=>`<div class="quote">${q}</div>`).join('')}
            ${(t.links||[]).length ? `<div class="muted">${t.links.map(l=>`<a href="${l}" target="_blank">${l}</a>`).join(' · ')}</div>` : ''}
          </article>
        `).join('');
      });
    </script>
  </body>
</html>
